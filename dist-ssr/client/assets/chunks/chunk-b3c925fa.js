import{j as O,r as C,o,a as m,b as n,w as t,f as $,F as N,v as I,c as b,e as j,t as f,u as h,s as R,d as v,N as D,O as E,B as G,z as K,m as W,A as Y}from"./chunk-b8a590ba.js";import{_ as H}from"./chunk-19421471.js";import{_ as J}from"./chunk-372590c2.js";import{h as T,c as Q,t as X,o as Z,b as ee,y as ae,v as B}from"./chunk-544fb087.js";/* empty css              *//* empty css              */import{_ as U}from"./chunk-c27b6911.js";import"./chunk-96a2c380.js";const le=[{label:"video.all",value:"all"},{label:"video.class.cn",value:"cn"},{label:"video.class.hktw",value:"hktw"},{label:"video.class.ja",value:"ja"},{label:"video.class.ko",value:"ko"},{label:"video.class.euus",value:"euus"},{label:"video.class.other",value:"other"}],te=[{label:"video.all",value:"all"},{label:"video.type.love",value:"love"},{label:"video.type.costume",value:"costume"},{label:"video.type.history",value:"history"},{label:"video.type.scifi",value:"scifi"},{label:"video.type.martial",value:"martial"},{label:"video.type.crime",value:"crime"},{label:"video.type.family",value:"family"},{label:"video.type.war",value:"war"},{label:"video.type.suspense",value:"suspense"},{label:"video.type.horror",value:"horror"},{label:"video.type.action",value:"action"},{label:"video.type.thriller",value:"thriller"},{label:"video.type.fantasy",value:"fantasy"},{label:"video.type.adventure",value:"adventure"},{label:"video.type.comedy",value:"comedy"}],oe=y=>(D("data-v-3dc8b7a8"),y=y(),E(),y),se={class:"v-option"},ne={class:"v-option-line",style:{}},re={class:"v-option-line"},ie={class:"v-option-line"},ue=oe(()=>$("div",{class:"mb-10px"},null,-1)),ce=O({__name:"index",props:{id:{type:String,require:!0}},emits:{search:y=>{}},setup(y){const _=y,c=T(),{proxy:x}=G(),S=Q(),s=X(),r=C({class:c.query.class||"all",type:c.query.type||"all",year:c.query.year||"all"});function k(i){r.value.class=i,x.$emit("search",r.value)}function V(i){r.value.type=i,x.$emit("search",r.value)}function u(i){r.value.year=i,x.$emit("search",r.value)}return(i,q)=>{const w=v.NButton,z=v.NScrollbar,e=v.NFormItem,a=v.NDivider,p=v.NForm;return o(),m("div",se,[n(p,{ref:"formRef",model:_,"label-placement":"left","label-align":"right","label-width":"90","require-mark-placement":"right-hanging",size:"medium","show-feedback":!1},{default:t(()=>[n(e,{label:i.$t("video.menu.class"),path:"inputValue"},{default:t(()=>[n(z,{"x-scrollable":"",size:0},{default:t(()=>[$("div",ne,[(o(!0),m(N,null,I(h(le),l=>(o(),b(w,{type:r.value.class==l.value?"primary":"tertiary",secondary:"",tag:"a",class:"mr-10px",inverted:h(S).header.inverted,onClick:g=>k(l.value)},{default:t(()=>[j(f(i.$t(l.label)),1)]),_:2},1032,["type","inverted","onClick"]))),256))])]),_:1})]),_:1},8,["label"]),n(a),/^(tv|movie)$/i.test(y.id)?(o(),m(N,{key:0},[n(e,{label:i.$t("video.menu.type")},{default:t(()=>[n(z,{"x-scrollable":"",size:1},{default:t(()=>[$("div",re,[(o(!0),m(N,null,I(h(te),l=>(o(),b(w,{type:r.value.type==l.value?"primary":"tertiary",secondary:"",tag:"a",class:"mr-10px",inverted:h(S).header.inverted,onClick:g=>V(l.value)},{default:t(()=>[j(f(i.$t(l.label)),1)]),_:2},1032,["type","inverted","onClick"]))),256))])]),_:1})]),_:1},8,["label"]),n(a)],64)):R("",!0),n(e,{label:i.$t("video.menu.year")},{default:t(()=>[n(z,{"x-scrollable":"",size:1},{default:t(()=>[$("div",ie,[(o(!0),m(N,null,I(h(s).years,l=>(o(),b(w,{type:r.value.year==l.value?"primary":"tertiary",secondary:"",tag:"a",class:"mr-10px",inverted:h(S).header.inverted,onClick:g=>u(l.value)},{default:t(()=>[j(f(i.$t(l.label)),1)]),_:2},1032,["type","inverted","onClick"]))),256))])]),_:1})]),_:1},8,["label"]),n(a),ue]),_:1},8,["model"])])}}}),pe=U(ce,[["__scopeId","data-v-3dc8b7a8"]]),de={class:"label"},ve={class:"tag"},ye=["onClick","href"],me=O({__name:"index",props:{id:{type:String,required:!0},limit:{type:Number,default:24},q:{type:String}},setup(y){const _=y,c=T(),x=Z(),S=ee(),s=C({pageNo:parseInt(c.query.pageNo)||1,pageCount:0,total:0,pageSize:24}),r=C([]),k=C(!0),V=C(S.screenWidth<=420?6:10),u=C({class:c.query.class||"all",type:c.query.type||"all",year:c.query.year||"all"});function i(e){let a=Object.assign({},c.query);return a.pageNo=e+"",a.id=_.id,a.class=u.value.class,a.type=u.value.type,a.year=u.value.year,c.path+"?"+Object.keys(a).map(p=>p+"="+encodeURIComponent(a[p])).join("&")}K(()=>{z({...u.value,pageNo:s.value.pageNo})});async function q(e){let a=s.value.pageCount||1;e=e<1?1:e,e=e>a?a:e;let p=c.path,l=Object.assign({},u.value,{pageNo:e});x.push(p+"?"+Object.keys(l).map(g=>g+"="+encodeURIComponent(l[g])).join("&"))}function w(e){u.value.class=e.class||"all",u.value.type=e.type||"all",u.value.year=e.year||"all",q(s.value.pageNo)}async function z(e){var p,l;s.value.pageNo=e.pageNo,u.value.class=e.class||"all",u.value.type=e.type||"all",u.value.year=e.year||"all",(p=globalThis.$loadingBar)==null||p.start(),k.value=!0;let{data:a}=await ae({cata:_.id||"tv",class:e.class,type:e.type,year:e.year,pageNo:e.pageNo,q:_.q});(l=globalThis.$loadingBar)==null||l.finish(),k.value=!1,s.value.total=a.page.total,s.value.pageSize=a.page.pageSize,s.value.pageCount=Math.ceil(a.page.total/a.page.pageSize),r.value=(a.list||[]).slice(0,_.limit)}return B("ArrowLeft",()=>{q(s.value.pageNo-1)}),B("ArrowRight",()=>{q(s.value.pageNo+1)}),(e,a)=>{const p=J,l=W("router-link"),g=v.NGi,A=v.NGrid,F=H,P=v.NCard,L=v.NSpin,M=v.NPagination;return o(),m("div",null,[n(h(pe),{id:_.id,onSearch:w},null,8,["id"]),n(L,{show:k.value,size:"large"},{default:t(()=>[n(P,{class:"mt-16px module-page"},{header:t(()=>[]),default:t(()=>[r.value.length>0?(o(),b(A,{key:0,cols:"xs:2 s:4 m:5 l:6 xl:7 2xl:12",responsive:"screen","x-gap":"3 x:6 s:9 m:12","y-gap":"3 x:6 s:9 m:12"},{default:t(()=>[(o(!0),m(N,null,I(r.value,d=>(o(),b(g,{key:d.id,span:"1",class:"min-h-90px"},{default:t(()=>[n(l,{to:"/video/detail/"+d.id,class:"v-item"},{default:t(()=>[n(p,{src:d.logo,class:"img"},null,8,["src"]),$("p",de,f(d.title),1),$("p",ve,f(e.$t("video.updated"))+" "+f(d.quality),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):(o(),b(F,{key:1,class:"h-500px",loading:k.value,empty:""},null,8,["loading"]))]),_:1})]),_:1},8,["show"]),r.value.length>0?(o(),b(M,{key:0,page:s.value.pageNo,"onUpdate:page":[a[0]||(a[0]=d=>s.value.pageNo=d),q],"page-slot":V.value,"item-count":s.value.total,"page-size":s.value.pageSize,class:"mt-10px"},{label:t(d=>[d.type=="page"?(o(),m("a",{key:0,onClick:Y(()=>{},["prevent"]),href:`${i(d.node)}`},f(d.node),9,ye)):(o(),m(N,{key:1},[],64))]),_:1},8,["page","page-slot","item-count","page-size"])):R("",!0)])}}}),$e=U(me,[["__scopeId","data-v-a68c73cf"]]);export{$e as V};
