import{j as A,r as d,z as B,m as F,o as s,c as i,w as r,a as f,v as O,b as k,f as C,t as m,F as x,A as V,s as $,d as _}from"./chunk-b8a590ba.js";import{_ as I}from"./chunk-19421471.js";import{_ as L}from"./chunk-372590c2.js";import{b as M,h as P,o as E,t as G,v as w}from"./chunk-544fb087.js";/* empty css              */import"./chunk-c27b6911.js";import"./chunk-101896b7.js";const D={class:"label"},K={class:"tag"},W=["onClick","href"],te=A({__name:"index",setup(H){const h=M(),c=P(),N=E(),y=G(),g=d(!0),o=d({pageNo:parseInt(c.query.pageNo)||1,pageCount:0,total:0,pageSize:24}),S=d(h.screenWidth<=420?6:10),u=d(h.inSSR?[]:[]);async function b(){g.value=!0;let e=o.value.pageNo||1,t=o.value.pageSize||24,n=(e-1)*t,p=await y.findFav({start:n,limit:t}),l=await y.findFavCount();g.value=!1,u.value=p,o.value.total=l,o.value.pageCount=Math.ceil(l/t)}function j(e){let t=Object.assign({},c.query);return t.pageNo=e+"",c.path+"?"+Object.keys(t).map(n=>n+"="+encodeURIComponent(t[n])).join("&")}async function v(e){let t=o.value.pageCount||1;e=e<1?1:e,e=e>t?t:e;let n=c.path,p=Object.assign({},{pageNo:e});N.push(n+"?"+Object.keys(p).map(l=>l+"="+encodeURIComponent(p[l])).join("&"))}return B(async()=>{b()}),w("ArrowLeft",()=>{v(o.value.pageNo-1)}),w("ArrowRight",()=>{v(o.value.pageNo+1)}),(e,t)=>{const n=L,p=F("router-link"),l=_.NGi,R=_.NGrid,z=I,q=_.NPagination,U=_.NCard;return s(),i(U,{title:e.$t("menu.fav"),class:"shadow-sm mt-16px"},{default:r(()=>[u.value.length>0?(s(),i(R,{key:0,cols:"xs:2 s:2 m:5 l:6 xl:7 2xl:12",responsive:"screen","x-gap":"6 m:12","y-gap":"6 m:12",class:"min-h-500px"},{default:r(()=>[(s(!0),f(x,null,O(u.value,a=>(s(),i(l,{span:"1",key:a.id,class:"min-h-90px"},{default:r(()=>[k(p,{to:"/video/detail/"+a.id,class:"v-item"},{default:r(()=>[k(n,{src:a.logo,alt:a.title},null,8,["src","alt"]),C("p",D,m(a.title),1),C("p",K,m(e.$t("video.updated"))+" "+m(a.quality),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):(s(),i(z,{key:1,class:"h-500px",loading:g.value,empty:""},null,8,["loading"])),u.value.length>0?(s(),i(q,{key:2,page:o.value.pageNo,"onUpdate:page":[t[0]||(t[0]=a=>o.value.pageNo=a),v],"page-slot":S.value,"item-count":o.value.total,"page-size":o.value.pageSize,class:"mt-10px"},{label:r(a=>[a.type=="page"?(s(),f("a",{key:0,onClick:V(()=>{},["prevent"]),href:`${j(a.node)}`},m(a.node),9,W)):(s(),f(x,{key:1},[],64))]),_:1},8,["page","page-slot","item-count","page-size"])):$("",!0)]),_:1},8,["title"])}}});export{te as default};
