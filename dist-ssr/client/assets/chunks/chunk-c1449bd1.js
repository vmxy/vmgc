var H={},Ft=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},mt={},A={};let at;const kt=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];A.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};A.getSymbolTotalCodewords=function(e){return kt[e]};A.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};A.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');at=e};A.isKanjiModeEnabled=function(){return typeof at<"u"};A.toSJIS=function(e){return at(e)};var Q={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,o){if(t.isValid(i))return i;try{return e(i)}catch{return o}}})(Q);function Ct(){this.buffer=[],this.length=0}Ct.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var zt=Ct;function V(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}V.prototype.set=function(t,e,r,i){const o=t*this.size+e;this.data[o]=r,i&&(this.reservedBit[o]=!0)};V.prototype.get=function(t,e){return this.data[t*this.size+e]};V.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};V.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Ot=V,yt={};(function(t){const e=A.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const o=Math.floor(i/7)+2,n=e(i),s=n===145?26:Math.ceil((n-13)/(2*o-2))*2,a=[n-7];for(let u=1;u<o-1;u++)a[u]=a[u-1]-s;return a.push(6),a.reverse()},t.getPositions=function(i){const o=[],n=t.getRowColCoords(i),s=n.length;for(let a=0;a<s;a++)for(let u=0;u<s;u++)a===0&&u===0||a===0&&u===s-1||a===s-1&&u===0||o.push([n[a],n[u]]);return o}})(yt);var Et={};const Ht=A.getSymbolSize,dt=7;Et.getPositions=function(e){const r=Ht(e);return[[0,0],[r-dt,0],[0,r-dt]]};var Bt={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const n=o.size;let s=0,a=0,u=0,c=null,l=null;for(let E=0;E<n;E++){a=u=0,c=l=null;for(let w=0;w<n;w++){let g=o.get(E,w);g===c?a++:(a>=5&&(s+=e.N1+(a-5)),c=g,a=1),g=o.get(w,E),g===l?u++:(u>=5&&(s+=e.N1+(u-5)),l=g,u=1)}a>=5&&(s+=e.N1+(a-5)),u>=5&&(s+=e.N1+(u-5))}return s},t.getPenaltyN2=function(o){const n=o.size;let s=0;for(let a=0;a<n-1;a++)for(let u=0;u<n-1;u++){const c=o.get(a,u)+o.get(a,u+1)+o.get(a+1,u)+o.get(a+1,u+1);(c===4||c===0)&&s++}return s*e.N2},t.getPenaltyN3=function(o){const n=o.size;let s=0,a=0,u=0;for(let c=0;c<n;c++){a=u=0;for(let l=0;l<n;l++)a=a<<1&2047|o.get(c,l),l>=10&&(a===1488||a===93)&&s++,u=u<<1&2047|o.get(l,c),l>=10&&(u===1488||u===93)&&s++}return s*e.N3},t.getPenaltyN4=function(o){let n=0;const s=o.data.length;for(let u=0;u<s;u++)n+=o.data[u];return Math.abs(Math.ceil(n*100/s/5)-10)*e.N4};function r(i,o,n){switch(i){case t.Patterns.PATTERN000:return(o+n)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return n%3===0;case t.Patterns.PATTERN011:return(o+n)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(n/3))%2===0;case t.Patterns.PATTERN101:return o*n%2+o*n%3===0;case t.Patterns.PATTERN110:return(o*n%2+o*n%3)%2===0;case t.Patterns.PATTERN111:return(o*n%3+(o+n)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(o,n){const s=n.size;for(let a=0;a<s;a++)for(let u=0;u<s;u++)n.isReserved(u,a)||n.xor(u,a,r(o,u,a))},t.getBestMask=function(o,n){const s=Object.keys(t.Patterns).length;let a=0,u=1/0;for(let c=0;c<s;c++){n(c),t.applyMask(c,o);const l=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(c,o),l<u&&(u=l,a=c)}return a}})(Bt);var j={};const L=Q,K=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],J=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];j.getBlocksCount=function(e,r){switch(r){case L.L:return K[(e-1)*4+0];case L.M:return K[(e-1)*4+1];case L.Q:return K[(e-1)*4+2];case L.H:return K[(e-1)*4+3];default:return}};j.getTotalCodewordsCount=function(e,r){switch(r){case L.L:return J[(e-1)*4+0];case L.M:return J[(e-1)*4+1];case L.Q:return J[(e-1)*4+2];case L.H:return J[(e-1)*4+3];default:return}};var pt={},G={};const z=new Uint8Array(512),Y=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)z[r]=e,Y[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)z[r]=z[r-255]})();G.log=function(e){if(e<1)throw new Error("log("+e+")");return Y[e]};G.exp=function(e){return z[e]};G.mul=function(e,r){return e===0||r===0?0:z[Y[e]+Y[r]]};(function(t){const e=G;t.mul=function(i,o){const n=new Uint8Array(i.length+o.length-1);for(let s=0;s<i.length;s++)for(let a=0;a<o.length;a++)n[s+a]^=e.mul(i[s],o[a]);return n},t.mod=function(i,o){let n=new Uint8Array(i);for(;n.length-o.length>=0;){const s=n[0];for(let u=0;u<o.length;u++)n[u]^=e.mul(o[u],s);let a=0;for(;a<n.length&&n[a]===0;)a++;n=n.slice(a)}return n},t.generateECPolynomial=function(i){let o=new Uint8Array([1]);for(let n=0;n<i;n++)o=t.mul(o,new Uint8Array([1,e.exp(n)]));return o}})(pt);const vt=pt;function ut(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}ut.prototype.initialize=function(e){this.degree=e,this.genPoly=vt.generateECPolynomial(this.degree)};ut.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const i=vt.mod(r,this.genPoly),o=this.degree-i.length;if(o>0){const n=new Uint8Array(this.degree);return n.set(i,o),n}return i};var Vt=ut,bt={},D={},ct={};ct.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var P={};const It="[0-9]+",Kt="[A-Z $%*+\\-./:]+";let O="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";O=O.replace(/u/g,"\\u");const Jt="(?:(?![A-Z0-9 $%*+\\-./:]|"+O+`)(?:.|[\r
]))+`;P.KANJI=new RegExp(O,"g");P.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");P.BYTE=new RegExp(Jt,"g");P.NUMERIC=new RegExp(It,"g");P.ALPHANUMERIC=new RegExp(Kt,"g");const Yt=new RegExp("^"+O+"$"),$t=new RegExp("^"+It+"$"),Qt=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");P.testKanji=function(e){return Yt.test(e)};P.testNumeric=function(e){return $t.test(e)};P.testAlphanumeric=function(e){return Qt.test(e)};(function(t){const e=ct,r=P;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(n,s){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!e.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?n.ccBits[0]:s<27?n.ccBits[1]:n.ccBits[2]},t.getBestModeForData=function(n){return r.testNumeric(n)?t.NUMERIC:r.testAlphanumeric(n)?t.ALPHANUMERIC:r.testKanji(n)?t.KANJI:t.BYTE},t.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")},t.isValid=function(n){return n&&n.bit&&n.ccBits};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(n,s){if(t.isValid(n))return n;try{return i(n)}catch{return s}}})(D);(function(t){const e=A,r=j,i=Q,o=D,n=ct,s=7973,a=e.getBCHDigit(s);function u(w,g,m){for(let C=1;C<=40;C++)if(g<=t.getCapacity(C,m,w))return C}function c(w,g){return o.getCharCountIndicator(w,g)+4}function l(w,g){let m=0;return w.forEach(function(C){const b=c(C.mode,g);m+=b+C.getBitsLength()}),m}function E(w,g){for(let m=1;m<=40;m++)if(l(w,m)<=t.getCapacity(m,g,o.MIXED))return m}t.from=function(g,m){return n.isValid(g)?parseInt(g,10):m},t.getCapacity=function(g,m,C){if(!n.isValid(g))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=o.BYTE);const b=e.getSymbolTotalCodewords(g),h=r.getTotalCodewordsCount(g,m),y=(b-h)*8;if(C===o.MIXED)return y;const d=y-c(C,g);switch(C){case o.NUMERIC:return Math.floor(d/10*3);case o.ALPHANUMERIC:return Math.floor(d/11*2);case o.KANJI:return Math.floor(d/13);case o.BYTE:default:return Math.floor(d/8)}},t.getBestVersionForData=function(g,m){let C;const b=i.from(m,i.M);if(Array.isArray(g)){if(g.length>1)return E(g,b);if(g.length===0)return 1;C=g[0]}else C=g;return u(C.mode,C.getLength(),b)},t.getEncodedBits=function(g){if(!n.isValid(g)||g<7)throw new Error("Invalid QR Code version");let m=g<<12;for(;e.getBCHDigit(m)-a>=0;)m^=s<<e.getBCHDigit(m)-a;return g<<12|m}})(bt);var At={};const et=A,Tt=1335,jt=21522,gt=et.getBCHDigit(Tt);At.getEncodedBits=function(e,r){const i=e.bit<<3|r;let o=i<<10;for(;et.getBCHDigit(o)-gt>=0;)o^=Tt<<et.getBCHDigit(o)-gt;return(i<<10|o)^jt};var Nt={};const Gt=D;function _(t){this.mode=Gt.NUMERIC,this.data=t.toString()}_.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};_.prototype.getLength=function(){return this.data.length};_.prototype.getBitsLength=function(){return _.getBitsLength(this.data.length)};_.prototype.write=function(e){let r,i,o;for(r=0;r+3<=this.data.length;r+=3)i=this.data.substr(r,3),o=parseInt(i,10),e.put(o,10);const n=this.data.length-r;n>0&&(i=this.data.substr(r),o=parseInt(i,10),e.put(o,n*3+1))};var Wt=_;const qt=D,q=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function U(t){this.mode=qt.ALPHANUMERIC,this.data=t}U.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};U.prototype.getLength=function(){return this.data.length};U.prototype.getBitsLength=function(){return U.getBitsLength(this.data.length)};U.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let i=q.indexOf(this.data[r])*45;i+=q.indexOf(this.data[r+1]),e.put(i,11)}this.data.length%2&&e.put(q.indexOf(this.data[r]),6)};var Xt=U,Zt=function(e){for(var r=[],i=e.length,o=0;o<i;o++){var n=e.charCodeAt(o);if(n>=55296&&n<=56319&&i>o+1){var s=e.charCodeAt(o+1);s>=56320&&s<=57343&&(n=(n-55296)*1024+s-56320+65536,o+=1)}if(n<128){r.push(n);continue}if(n<2048){r.push(n>>6|192),r.push(n&63|128);continue}if(n<55296||n>=57344&&n<65536){r.push(n>>12|224),r.push(n>>6&63|128),r.push(n&63|128);continue}if(n>=65536&&n<=1114111){r.push(n>>18|240),r.push(n>>12&63|128),r.push(n>>6&63|128),r.push(n&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const xt=Zt,te=D;function F(t){this.mode=te.BYTE,typeof t=="string"&&(t=xt(t)),this.data=new Uint8Array(t)}F.getBitsLength=function(e){return e*8};F.prototype.getLength=function(){return this.data.length};F.prototype.getBitsLength=function(){return F.getBitsLength(this.data.length)};F.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var ee=F;const ne=D,re=A;function k(t){this.mode=ne.KANJI,this.data=t}k.getBitsLength=function(e){return e*13};k.prototype.getLength=function(){return this.data.length};k.prototype.getBitsLength=function(){return k.getBitsLength(this.data.length)};k.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=re.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var oe=k,St={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,i,o){var n={},s={};s[i]=0;var a=e.PriorityQueue.make();a.push(i,0);for(var u,c,l,E,w,g,m,C,b;!a.empty();){u=a.pop(),c=u.value,E=u.cost,w=r[c]||{};for(l in w)w.hasOwnProperty(l)&&(g=w[l],m=E+g,C=s[l],b=typeof s[l]>"u",(b||C>m)&&(s[l]=m,a.push(l,m),n[l]=c))}if(typeof o<"u"&&typeof s[o]>"u"){var h=["Could not find a path from ",i," to ",o,"."].join("");throw new Error(h)}return n},extract_shortest_path_from_predecessor_list:function(r,i){for(var o=[],n=i;n;)o.push(n),r[n],n=r[n];return o.reverse(),o},find_path:function(r,i,o){var n=e.single_source_shortest_paths(r,i,o);return e.extract_shortest_path_from_predecessor_list(n,o)},PriorityQueue:{make:function(r){var i=e.PriorityQueue,o={},n;r=r||{};for(n in i)i.hasOwnProperty(n)&&(o[n]=i[n]);return o.queue=[],o.sorter=r.sorter||i.default_sorter,o},default_sorter:function(r,i){return r.cost-i.cost},push:function(r,i){var o={value:r,cost:i};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(St);var ie=St.exports;(function(t){const e=D,r=Wt,i=Xt,o=ee,n=oe,s=P,a=A,u=ie;function c(h){return unescape(encodeURIComponent(h)).length}function l(h,y,d){const f=[];let B;for(;(B=h.exec(d))!==null;)f.push({data:B[0],index:B.index,mode:y,length:B[0].length});return f}function E(h){const y=l(s.NUMERIC,e.NUMERIC,h),d=l(s.ALPHANUMERIC,e.ALPHANUMERIC,h);let f,B;return a.isKanjiModeEnabled()?(f=l(s.BYTE,e.BYTE,h),B=l(s.KANJI,e.KANJI,h)):(f=l(s.BYTE_KANJI,e.BYTE,h),B=[]),y.concat(d,f,B).sort(function(p,I){return p.index-I.index}).map(function(p){return{data:p.data,mode:p.mode,length:p.length}})}function w(h,y){switch(y){case e.NUMERIC:return r.getBitsLength(h);case e.ALPHANUMERIC:return i.getBitsLength(h);case e.KANJI:return n.getBitsLength(h);case e.BYTE:return o.getBitsLength(h)}}function g(h){return h.reduce(function(y,d){const f=y.length-1>=0?y[y.length-1]:null;return f&&f.mode===d.mode?(y[y.length-1].data+=d.data,y):(y.push(d),y)},[])}function m(h){const y=[];for(let d=0;d<h.length;d++){const f=h[d];switch(f.mode){case e.NUMERIC:y.push([f,{data:f.data,mode:e.ALPHANUMERIC,length:f.length},{data:f.data,mode:e.BYTE,length:f.length}]);break;case e.ALPHANUMERIC:y.push([f,{data:f.data,mode:e.BYTE,length:f.length}]);break;case e.KANJI:y.push([f,{data:f.data,mode:e.BYTE,length:c(f.data)}]);break;case e.BYTE:y.push([{data:f.data,mode:e.BYTE,length:c(f.data)}])}}return y}function C(h,y){const d={},f={start:{}};let B=["start"];for(let v=0;v<h.length;v++){const p=h[v],I=[];for(let S=0;S<p.length;S++){const T=p[S],N=""+v+S;I.push(N),d[N]={node:T,lastCount:0},f[N]={};for(let R=0;R<B.length;R++){const M=B[R];d[M]&&d[M].node.mode===T.mode?(f[M][N]=w(d[M].lastCount+T.length,T.mode)-w(d[M].lastCount,T.mode),d[M].lastCount+=T.length):(d[M]&&(d[M].lastCount=T.length),f[M][N]=w(T.length,T.mode)+4+e.getCharCountIndicator(T.mode,y))}}B=I}for(let v=0;v<B.length;v++)f[B[v]].end=0;return{map:f,table:d}}function b(h,y){let d;const f=e.getBestModeForData(h);if(d=e.from(y,f),d!==e.BYTE&&d.bit<f.bit)throw new Error('"'+h+'" cannot be encoded with mode '+e.toString(d)+`.
 Suggested mode is: `+e.toString(f));switch(d===e.KANJI&&!a.isKanjiModeEnabled()&&(d=e.BYTE),d){case e.NUMERIC:return new r(h);case e.ALPHANUMERIC:return new i(h);case e.KANJI:return new n(h);case e.BYTE:return new o(h)}}t.fromArray=function(y){return y.reduce(function(d,f){return typeof f=="string"?d.push(b(f,null)):f.data&&d.push(b(f.data,f.mode)),d},[])},t.fromString=function(y,d){const f=E(y,a.isKanjiModeEnabled()),B=m(f),v=C(B,d),p=u.find_path(v.map,"start","end"),I=[];for(let S=1;S<p.length-1;S++)I.push(v.table[p[S]].node);return t.fromArray(g(I))},t.rawSplit=function(y){return t.fromArray(E(y,a.isKanjiModeEnabled()))}})(Nt);const W=A,X=Q,se=zt,ae=Ot,ue=yt,ce=Et,nt=Bt,rt=j,le=Vt,$=bt,fe=At,de=D,Z=Nt;function ge(t,e){const r=t.size,i=ce.getPositions(e);for(let o=0;o<i.length;o++){const n=i[o][0],s=i[o][1];for(let a=-1;a<=7;a++)if(!(n+a<=-1||r<=n+a))for(let u=-1;u<=7;u++)s+u<=-1||r<=s+u||(a>=0&&a<=6&&(u===0||u===6)||u>=0&&u<=6&&(a===0||a===6)||a>=2&&a<=4&&u>=2&&u<=4?t.set(n+a,s+u,!0,!0):t.set(n+a,s+u,!1,!0))}}function he(t){const e=t.size;for(let r=8;r<e-8;r++){const i=r%2===0;t.set(r,6,i,!0),t.set(6,r,i,!0)}}function we(t,e){const r=ue.getPositions(e);for(let i=0;i<r.length;i++){const o=r[i][0],n=r[i][1];for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s===-2||s===2||a===-2||a===2||s===0&&a===0?t.set(o+s,n+a,!0,!0):t.set(o+s,n+a,!1,!0)}}function me(t,e){const r=t.size,i=$.getEncodedBits(e);let o,n,s;for(let a=0;a<18;a++)o=Math.floor(a/3),n=a%3+r-8-3,s=(i>>a&1)===1,t.set(o,n,s,!0),t.set(n,o,s,!0)}function x(t,e,r){const i=t.size,o=fe.getEncodedBits(e,r);let n,s;for(n=0;n<15;n++)s=(o>>n&1)===1,n<6?t.set(n,8,s,!0):n<8?t.set(n+1,8,s,!0):t.set(i-15+n,8,s,!0),n<8?t.set(8,i-n-1,s,!0):n<9?t.set(8,15-n-1+1,s,!0):t.set(8,15-n-1,s,!0);t.set(i-8,8,1,!0)}function Ce(t,e){const r=t.size;let i=-1,o=r-1,n=7,s=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let u=0;u<2;u++)if(!t.isReserved(o,a-u)){let c=!1;s<e.length&&(c=(e[s]>>>n&1)===1),t.set(o,a-u,c),n--,n===-1&&(s++,n=7)}if(o+=i,o<0||r<=o){o-=i,i=-i;break}}}function ye(t,e,r){const i=new se;r.forEach(function(u){i.put(u.mode.bit,4),i.put(u.getLength(),de.getCharCountIndicator(u.mode,t)),u.write(i)});const o=W.getSymbolTotalCodewords(t),n=rt.getTotalCodewordsCount(t,e),s=(o-n)*8;for(i.getLengthInBits()+4<=s&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const a=(s-i.getLengthInBits())/8;for(let u=0;u<a;u++)i.put(u%2?17:236,8);return Ee(i,t,e)}function Ee(t,e,r){const i=W.getSymbolTotalCodewords(e),o=rt.getTotalCodewordsCount(e,r),n=i-o,s=rt.getBlocksCount(e,r),a=i%s,u=s-a,c=Math.floor(i/s),l=Math.floor(n/s),E=l+1,w=c-l,g=new le(w);let m=0;const C=new Array(s),b=new Array(s);let h=0;const y=new Uint8Array(t.buffer);for(let p=0;p<s;p++){const I=p<u?l:E;C[p]=y.slice(m,m+I),b[p]=g.encode(C[p]),m+=I,h=Math.max(h,I)}const d=new Uint8Array(i);let f=0,B,v;for(B=0;B<h;B++)for(v=0;v<s;v++)B<C[v].length&&(d[f++]=C[v][B]);for(B=0;B<w;B++)for(v=0;v<s;v++)d[f++]=b[v][B];return d}function Be(t,e,r,i){let o;if(Array.isArray(t))o=Z.fromArray(t);else if(typeof t=="string"){let c=e;if(!c){const l=Z.rawSplit(t);c=$.getBestVersionForData(l,r)}o=Z.fromString(t,c||40)}else throw new Error("Invalid data");const n=$.getBestVersionForData(o,r);if(!n)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=n;else if(e<n)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+n+`.
`);const s=ye(e,r,o),a=W.getSymbolSize(e),u=new ae(a);return ge(u,e),he(u),we(u,e),x(u,r,0),e>=7&&me(u,e),Ce(u,s),isNaN(i)&&(i=nt.getBestMask(u,x.bind(null,u,r))),nt.applyMask(i,u),x(u,r,i),{modules:u,version:e,errorCorrectionLevel:r,maskPattern:i,segments:o}}mt.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let i=X.M,o,n;return typeof r<"u"&&(i=X.from(r.errorCorrectionLevel,X.M),o=$.from(r.version),n=nt.from(r.maskPattern),r.toSJISFunc&&W.setToSJISFunction(r.toSJISFunc)),Be(e,o,i,n)};var Pt={},lt={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let i=r.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+r);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(n){return[n,n]}))),i.length===6&&i.push("F","F");const o=parseInt(i.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const o=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,n=i.width&&i.width>=21?i.width:void 0,s=i.scale||4;return{width:n,scale:n?4:s,margin:o,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,o){return o.width&&o.width>=i+o.margin*2?o.width/(i+o.margin*2):o.scale},t.getImageWidth=function(i,o){const n=t.getScale(i,o);return Math.floor((i+o.margin*2)*n)},t.qrToImageData=function(i,o,n){const s=o.modules.size,a=o.modules.data,u=t.getScale(s,n),c=Math.floor((s+n.margin*2)*u),l=n.margin*u,E=[n.color.light,n.color.dark];for(let w=0;w<c;w++)for(let g=0;g<c;g++){let m=(w*c+g)*4,C=n.color.light;if(w>=l&&g>=l&&w<c-l&&g<c-l){const b=Math.floor((w-l)/u),h=Math.floor((g-l)/u);C=E[a[b*s+h]?1:0]}i[m++]=C.r,i[m++]=C.g,i[m++]=C.b,i[m]=C.a}}})(lt);(function(t){const e=lt;function r(o,n,s){o.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=s,n.width=s,n.style.height=s+"px",n.style.width=s+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(n,s,a){let u=a,c=s;typeof u>"u"&&(!s||!s.getContext)&&(u=s,s=void 0),s||(c=i()),u=e.getOptions(u);const l=e.getImageWidth(n.modules.size,u),E=c.getContext("2d"),w=E.createImageData(l,l);return e.qrToImageData(w.data,n,u),r(E,c,l),E.putImageData(w,0,0),c},t.renderToDataURL=function(n,s,a){let u=a;typeof u>"u"&&(!s||!s.getContext)&&(u=s,s=void 0),u||(u={});const c=t.render(n,s,u),l=u.type||"image/png",E=u.rendererOpts||{};return c.toDataURL(l,E.quality)}})(Pt);var Mt={};const pe=lt;function ht(t,e){const r=t.a/255,i=e+'="'+t.hex+'"';return r<1?i+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':i}function tt(t,e,r){let i=t+e;return typeof r<"u"&&(i+=" "+r),i}function ve(t,e,r){let i="",o=0,n=!1,s=0;for(let a=0;a<t.length;a++){const u=Math.floor(a%e),c=Math.floor(a/e);!u&&!n&&(n=!0),t[a]?(s++,a>0&&u>0&&t[a-1]||(i+=n?tt("M",u+r,.5+c+r):tt("m",o,0),o=0,n=!1),u+1<e&&t[a+1]||(i+=tt("h",s),s=0)):o++}return i}Mt.render=function(e,r,i){const o=pe.getOptions(r),n=e.modules.size,s=e.modules.data,a=n+o.margin*2,u=o.color.light.a?"<path "+ht(o.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",c="<path "+ht(o.color.dark,"stroke")+' d="'+ve(s,n,o.margin)+'"/>',l='viewBox="0 0 '+a+" "+a+'"',w='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+l+' shape-rendering="crispEdges">'+u+c+`</svg>
`;return typeof i=="function"&&i(null,w),w};const be=Ft,ot=mt,Rt=Pt,Ie=Mt;function ft(t,e,r,i,o){const n=[].slice.call(arguments,1),s=n.length,a=typeof n[s-1]=="function";if(!a&&!be())throw new Error("Callback required as last argument");if(a){if(s<2)throw new Error("Too few arguments provided");s===2?(o=r,r=e,e=i=void 0):s===3&&(e.getContext&&typeof o>"u"?(o=i,i=void 0):(o=i,i=r,r=e,e=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(r=e,e=i=void 0):s===2&&!e.getContext&&(i=r,r=e,e=void 0),new Promise(function(u,c){try{const l=ot.create(r,i);u(t(l,e,i))}catch(l){c(l)}})}try{const u=ot.create(r,i);o(null,t(u,e,i))}catch(u){o(u)}}H.create=ot.create;H.toCanvas=ft.bind(null,Rt.render);H.toDataURL=ft.bind(null,Rt.renderToDataURL);H.toString=ft.bind(null,function(t,e,r){return Ie.render(t,r)});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function it(t,e,r,i){function o(n){return n instanceof r?n:new r(function(s){s(n)})}return new(r||(r=Promise))(function(n,s){function a(l){try{c(i.next(l))}catch(E){s(E)}}function u(l){try{c(i.throw(l))}catch(E){s(E)}}function c(l){l.done?n(l.value):o(l.value).then(a,u)}c((i=i.apply(t,e||[])).next())})}function st(t,e){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,o,n,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(n=c[0]&2?o.return:c[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,c[1])).done)return n;switch(o=0,n&&(c=[c[0]&2,n.value]),c[0]){case 0:case 1:n=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!n||c[1]>n[0]&&c[1]<n[3])){r.label=c[1];break}if(c[0]===6&&r.label<n[1]){r.label=n[1],n=c;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(c);break}n[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],o=0}finally{i=n=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Ae=function(t){return function(){var e=Array.prototype.slice.call(arguments);return new Promise(function(r,i){e.push(function(o,n){o?i(o):r(n)}),t.apply(null,e)})}};function Te(t){return typeof t=="function"}function Lt(t){return typeof t=="string"}var Ne=H,Dt=Ae(Ne.toCanvas),Se=function(t){var e=t.canvas,r=t.content,i=t.width,o=i===void 0?0:i,n=t.nodeQrCodeOptions,s=n===void 0?{}:n;return s.errorCorrectionLevel=s.errorCorrectionLevel||Me(r),Pe(r,s).then(function(a){return s.scale=o===0?void 0:o/a*4,Dt(e,r,s)})},Pe=function(t,e){var r=document.createElement("canvas");return Dt(r,t,e).then(function(){return r.width})},Me=function(t){return t.length>36?"M":t.length>16?"Q":"H"},Re=function(t){var e=t.canvas,r=t.logo;if(!r||r==="")return Promise.resolve();var i=e.width;Lt(r)&&(r={src:r});var o=r,n=o.logoSize,s=n===void 0?.15:n,a=o.borderColor,u=a===void 0?"#ffffff":a,c=o.bgColor,l=c===void 0?u||"#ffffff":c,E=o.borderSize,w=E===void 0?.05:E,g=o.crossOrigin,m=o.borderRadius,C=m===void 0?8:m,b=o.logoRadius,h=b===void 0?0:b,y=typeof r=="string"?r:r.src,d=i*s,f=i*(1-s)/2,B=i*(s+w),v=i*(1-s-w)/2,p=e.getContext("2d");wt(p)(v,v,B,B,C),p.fillStyle=l,p.fill();var I=new Image;I.setAttribute("crossOrigin",g||"anonymous"),I.src=y;var S=function(N){p.drawImage(N,f,f,d,d)},T=function(N){var R=document.createElement("canvas");R.width=f+d,R.height=f+d,R.getContext("2d").drawImage(N,f,f,d,d),wt(p)(f,f,d,d,h),p.fillStyle=p.createPattern(R,"no-repeat"),p.fill()};return new Promise(function(N){I.onload=function(){h?T(I):S(I),N()}})},wt=function(t){return function(e,r,i,o,n){var s=Math.min(i,o);return n>s/2&&(n=s/2),t.beginPath(),t.moveTo(e+n,r),t.arcTo(e+i,r,e+i,r+o,n),t.arcTo(e+i,r+o,e,r+o,n),t.arcTo(e,r+o,e,r,n),t.arcTo(e,r,e+i,r,n),t.closePath(),t}},_t=function(t){return Se(t).then(function(){return Re(t)})},Le=function(t){return it(this,void 0,void 0,function(){var e,r,i,o,n,s,a;return st(this,function(u){switch(u.label){case 0:return e=t.canvas,t.logo&&(Lt(t.logo)&&(t.logo={src:t.logo}),t.logo.crossOrigin="Anonymous"),this.ifCanvasDrawed?[3,2]:[4,_t(t)];case 1:u.sent(),u.label=2;case 2:if(r=t.image,i=r===void 0?new Image:r,o=t.downloadName,n=o===void 0?"qr-code":o,s=t.download,e.toDataURL())i.src=e.toDataURL();else throw new Error("Can not get the canvas DataURL");return this.ifImageCreated=!0,s!==!0&&!Te(s)?[2]:(s=s===!0?function(c){return c()}:s,a=function(){Ut(i,n)},s&&s(a),[2,Promise.resolve()])}})})},Ut=function(t,e){var r=t.src,i=document.createElement("a");i.download=e,i.href=r,i.dispatchEvent(new MouseEvent("click"))},De=function(){function t(e){this.ifCanvasDrawed=!1,this.ifImageCreated=!1,this.defaultOption={canvas:document.createElement("canvas"),image:new Image,content:""},this.option=Object.assign(this.defaultOption,e)}return t.prototype.toCanvas=function(){var e=this;return _t.call(this,this.option).then(function(){return e.ifCanvasDrawed=!0,Promise.resolve()})},t.prototype.toImage=function(){return Le.call(this,this.option)},t.prototype.downloadImage=function(e){return it(this,void 0,void 0,function(){return st(this,function(r){switch(r.label){case 0:return this.ifImageCreated?[3,2]:[4,this.toImage()];case 1:r.sent(),r.label=2;case 2:return Ut(this.option.image,e),[2]}})})},t.prototype.getCanvas=function(){return it(this,void 0,Promise,function(){return st(this,function(e){switch(e.label){case 0:return this.ifCanvasDrawed?[3,2]:[4,this.toCanvas()];case 1:e.sent(),e.label=2;case 2:return[2,this.option.canvas]}})})},t}();export{De as default};
