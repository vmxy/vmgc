import{ref as S,effectScope as k,watch as r,onScopeDispose as R,nextTick as w}from"vue";import*as l from"echarts/core.js";import{BarChart as z,LineChart as L,PieChart as b,ScatterChart as x,PictorialBarChart as y,RadarChart as B,GaugeChart as D}from"echarts/charts.js";import{TitleComponent as E,LegendComponent as G,TooltipComponent as M,GridComponent as P,DatasetComponent as O,TransformComponent as U,ToolboxComponent as j}from"echarts/components.js";import{LabelLayout as q,UniversalTransition as A}from"echarts/features.js";import{CanvasRenderer as I}from"echarts/renderers.js";import{useElementSize as J}from"@vueuse/core";import{a as K}from"../entries/pages_all-page-server.mjs";import"crypto-js";import"qs";import"form-data";l.use([E,G,M,P,O,U,j,z,L,b,x,y,B,D,q,A,I]);function W(i,a){const m=K(),o=S(),n={width:0,height:0},{width:h,height:C}=J(o,n);let e=null;function T(){return n.width>0&&n.height>0}function s(){return!!(o.value&&e)}function p(t){s()&&(e==null||e.clear(),e.setOption({...t,backgroundColor:"transparent"}))}async function u(){if(o.value){const t=m.darkMode?"dark":"light";await w(),e=l.init(o.value,t),a&&a(e),p(i.value)}}function g(){e==null||e.resize()}function f(){e==null||e.dispose()}function v(){f(),u()}const c=k();return c.run(()=>{r([h,C],([t,d])=>{n.width=t,n.height=d,t===0&&d===0&&(e=null),T()&&(s()?g():u())}),r(i,t=>{p(t)},{deep:!0}),r(()=>m.darkMode,()=>{v()})}),R(()=>{f(),c.stop()}),{domRef:o}}export{W as u};
