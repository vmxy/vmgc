import{NCard as X,NGrid as Y,NGi as Z,NPagination as ee}from"naive-ui/dist/index.js";import{_ as te}from"./chunk-77fa2acc.js";import{_ as ae}from"./chunk-c017eb19.js";import{defineComponent as le,getCurrentInstance as oe,ref as h,onMounted as ne,resolveComponent as se,mergeProps as re,withCtx as r,createVNode as o,toDisplayString as n,openBlock as p,createBlock as i,Fragment as S,renderList as G,withModifiers as I,createCommentVNode as pe,useSSRContext as ie}from"vue";import{ssrRenderComponent as v,ssrRenderList as ue,ssrInterpolate as w,ssrRenderAttr as ce}from"vue/server-renderer";import{u as de,z as ge}from"../entries/pages_all-page-server.mjs";import{onKeyStroke as D}from"@vueuse/core";import"crypto-js";import"qs";import"form-data";import{useRoute as me,useRouter as ve}from"vue-router";import"./chunk-c27b6911.js";import"@vue/server-renderer";import"vite-plugin-ssr/server";import"@ai-lion/liondb";import"buffer";import"pinia";import"@soybeanjs/vue-materials";import"colord";import"colord/plugins/names";import"colord/plugins/mix";import"lru-cache";import"lodash-es";import"vue-i18n/dist/vue-i18n.cjs.js";import"ua-parser-js";import"axios";import"@iconify/vue";import"url";const W=le({__name:"index",__ssrInlineRender:!0,setup(A){oe();const x=de(),g=me(),E=ve(),L=ge(),C=h(!0),l=h({pageNo:parseInt(g.query.pageNo)||1,pageCount:0,total:0,pageSize:24}),O=h(x.screenWidth<=420?6:10),u=h(x.inSSR?[]:[]);async function H(){C.value=!0;let a=l.value.pageNo||1,s=l.value.pageSize||24,c=(a-1)*s,f=await L.findFav({start:c,limit:s}),m=await L.findFavCount();C.value=!1,u.value=f,l.value.total=m,l.value.pageCount=Math.ceil(m/s)}function R(a){let s=Object.assign({},g.query);return s.pageNo=a+"",g.path+"?"+Object.keys(s).map(c=>c+"="+encodeURIComponent(s[c])).join("&")}async function k(a){let s=l.value.pageCount||1;a=a<1?1:a,a=a>s?s:a;let c=g.path,f=Object.assign({},{pageNo:a});E.push(c+"?"+Object.keys(f).map(m=>m+"="+encodeURIComponent(f[m])).join("&"))}return ne(async()=>{H()}),D("ArrowLeft",()=>{k(l.value.pageNo-1)}),D("ArrowRight",()=>{k(l.value.pageNo+1)}),(a,s,c,f)=>{const m=X,P=Y,b=Z,$=se("router-link"),_=ae,F=te,M=ee;s(v(m,re({title:a.$t("menu.fav"),class:"shadow-sm mt-16px"},f),{default:r((fe,y,N,q)=>{if(y)u.value.length>0?y(v(P,{cols:"xs:2 s:2 m:5 l:6 xl:7 2xl:12",responsive:"screen","x-gap":"6 m:12","y-gap":"6 m:12",class:"min-h-500px"},{default:r((e,d,V,z)=>{if(d)d("<!--[-->"),ue(u.value,t=>{d(v(b,{span:"1",key:t.id,class:"min-h-90px"},{default:r((_e,B,J,Q)=>{if(B)B(v($,{to:"/video/detail/"+t.id,class:"v-item"},{default:r((ye,U,T,j)=>{if(U)U(v(_,{src:t.logo,alt:t.title},null,T,j)),U(`<p class="label"${j}>${w(t.title)}</p><p class="tag"${j}>${w(a.$t("video.updated"))} ${w(t.quality)}</p>`);else return[o(_,{src:t.logo,alt:t.title},null,8,["src","alt"]),o("p",{class:"label"},n(t.title),1),o("p",{class:"tag"},n(a.$t("video.updated"))+" "+n(t.quality),1)]}),_:2},J,Q));else return[o($,{to:"/video/detail/"+t.id,class:"v-item"},{default:r(()=>[o(_,{src:t.logo,alt:t.title},null,8,["src","alt"]),o("p",{class:"label"},n(t.title),1),o("p",{class:"tag"},n(a.$t("video.updated"))+" "+n(t.quality),1)]),_:2},1032,["to"])]}),_:2},V,z))}),d("<!--]-->");else return[(p(!0),i(S,null,G(u.value,t=>(p(),i(b,{span:"1",key:t.id,class:"min-h-90px"},{default:r(()=>[o($,{to:"/video/detail/"+t.id,class:"v-item"},{default:r(()=>[o(_,{src:t.logo,alt:t.title},null,8,["src","alt"]),o("p",{class:"label"},n(t.title),1),o("p",{class:"tag"},n(a.$t("video.updated"))+" "+n(t.quality),1)]),_:2},1032,["to"])]),_:2},1024))),128))]}),_:1},N,q)):y(v(F,{class:"h-500px",loading:C.value,empty:""},null,N,q)),u.value.length>0?y(v(M,{page:l.value.pageNo,"onUpdate:page":[e=>l.value.pageNo=e,k],"page-slot":O.value,"item-count":l.value.total,"page-size":l.value.pageSize,class:"mt-10px"},{label:r((e,d,V,z)=>{if(d)e.type=="page"?d(`<a${ce("href",`${R(e.node)}`)}${z}>${w(e.node)}</a>`):d("<!--[--><!--]-->");else return[e.type=="page"?(p(),i("a",{key:0,onClick:I(()=>{},["prevent"]),href:`${R(e.node)}`},n(e.node),9,["onClick","href"])):(p(),i(S,{key:1},[],64))]}),_:1},N,q)):y("<!---->");else return[u.value.length>0?(p(),i(P,{key:0,cols:"xs:2 s:2 m:5 l:6 xl:7 2xl:12",responsive:"screen","x-gap":"6 m:12","y-gap":"6 m:12",class:"min-h-500px"},{default:r(()=>[(p(!0),i(S,null,G(u.value,e=>(p(),i(b,{span:"1",key:e.id,class:"min-h-90px"},{default:r(()=>[o($,{to:"/video/detail/"+e.id,class:"v-item"},{default:r(()=>[o(_,{src:e.logo,alt:e.title},null,8,["src","alt"]),o("p",{class:"label"},n(e.title),1),o("p",{class:"tag"},n(a.$t("video.updated"))+" "+n(e.quality),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):(p(),i(F,{key:1,class:"h-500px",loading:C.value,empty:""},null,8,["loading"])),u.value.length>0?(p(),i(M,{key:2,page:l.value.pageNo,"onUpdate:page":[e=>l.value.pageNo=e,k],"page-slot":O.value,"item-count":l.value.total,"page-size":l.value.pageSize,class:"mt-10px"},{label:r(e=>[e.type=="page"?(p(),i("a",{key:0,onClick:I(()=>{},["prevent"]),href:`${R(e.node)}`},n(e.node),9,["onClick","href"])):(p(),i(S,{key:1},[],64))]),_:1},8,["page","onUpdate:page","page-slot","item-count","page-size"])):pe("",!0)]}),_:1},c))}}}),K=W.setup;W.setup=(A,x)=>{const g=ie();return(g.modules||(g.modules=new Set)).add("src/views/video/fav/index.vue"),K?K(A,x):void 0};export{W as default};
