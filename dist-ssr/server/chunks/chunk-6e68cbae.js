import{d as k,e as Y,a as Z,f as ee}from"./chunk-f321ead2.js";import{NSpin as te,NGrid as le,NGi as ne,NButton as ie}from"naive-ui/dist/index.js";import{defineComponent as H,ref as y,onMounted as I,watch as se,onBeforeUnmount as re,onUnmounted as oe,mergeProps as ae,withCtx as s,createVNode as l,openBlock as C,createBlock as b,useSSRContext as J,getCurrentInstance as ue,computed as ce,toDisplayString as O,unref as g,createCommentVNode as N}from"vue";import{ssrRenderComponent as u,ssrRenderAttr as de,ssrRenderStyle as M,ssrRenderAttrs as fe,ssrInterpolate as ve}from"vue/server-renderer";import{u as K,z as pe,J as _e}from"../entries/pages_all-page-server.mjs";import"crypto-js";import"qs";import"form-data";import{_ as me}from"./chunk-c27b6911.js";/* empty css              */import"./chunk-77fa2acc.js";import"./chunk-c017eb19.js";import"@vueuse/core";import"vue-router";import"dayjs";import"@vue/server-renderer";import"vite-plugin-ssr/server";import"@ai-lion/liondb";import"buffer";import"pinia";import"@soybeanjs/vue-materials";import"colord";import"colord/plugins/names";import"colord/plugins/mix";import"lru-cache";import"lodash-es";import"vue-i18n/dist/vue-i18n.cjs.js";import"ua-parser-js";import"axios";import"@iconify/vue";import"url";const ge=new Set(["v_play","v_playing","v_pause","v_ended","v_error","v_seeking","v_seeked","v_timeupdate","v_waiting","v_canplay","v_canplaythrough","v_durationchange","v_volumechange","v_bufferedChange","v_definitionChange","v_playbackrateChange","v_screenShot","v_requestFullscreen","v_exitFullscreen","v_requestCssFullscreen","v_exitCssFullscreen","v_getRotateFullscreen","v_exitRotateFullscreen","v_controlShow","v_controlHide","v_resize"]);class ye{constructor(t){this.ele=t,this.init(t)}init(t){t&&(console.info("======================= init event ========================="),window.addEventListener("message",r=>{let{event:o,data:_}=r.data;if(ge.has(o))switch(o=o.replace(/^v_/,""),o){case"requestCssFullscreen":t.className+="h-full w-full";break;case"exitCssFullscreen":t.className=t.className.replace(/(h-full|w-full)/,"");break;case"resize":t.style.height=_.height+"px";break}}))}}const A=H({__name:"index",__ssrInlineRender:!0,props:{res:{type:Object,required:!0,default:{}}},setup(p){const t=p;K();const r=y(!0),o=y(""),_=y();y(!1);function e(c){o.value=c}function V(){r.value=!1,new ye(_.value)}function d(c){return`${globalThis.VIDEO_URL||"https://svbcdn.github.io/xplayer"}?id=${encodeURIComponent(c)}`}return I(()=>{t.res.url&&e(d(t.res.url))}),se(t.res,c=>{c.url&&e(d(c.url))}),re(()=>{}),oe(()=>{}),(c,R,n,i)=>{R(u(te,ae({show:r.value,size:"large"},i),{default:s((h,a,f,x)=>{if(a)a(`<div data-v-2fff8e54${x}>`),a(`<iframe id="ifa-video"${de("src",o.value)} width="100%" scrolling="no" style="${M({overflow:"hidden"})}" allowfullscreen class="player" data-v-2fff8e54${x}></iframe>`),a("</div>");else return[l("div",null,[(C(),b("iframe",{key:0,id:"ifa-video",src:o.value,width:"100%",scrolling:"no",style:{overflow:"hidden"},allowfullscreen:"",class:"player",ref_key:"videoRef",ref:_,onLoad:V},null,40,["src"]))])]}),_:1},n))}}});const j=A.setup;A.setup=(p,t)=>{const r=J();return(r.modules||(r.modules=new Set)).add("src/components/business/g-player/index.vue"),j?j(p,t):void 0};const xe=me(A,[["__scopeId","data-v-2fff8e54"]]),Q=H({__name:"[id]",__ssrInlineRender:!0,setup(p){const t=K(),r=pe(),{proxy:o}=ue(),_=ce(()=>{let n=o.$route.params.id;return n instanceof Array?n[0]:n}),e=y(t.inSSR?o.$root.$attrs.detail:{id:"",lines:[]}),V=y([]),d=y(!1);async function c(n){let i=await r.toggleFav({id:n.vid,title:n.title,logo:n.logo,desc:n.desc,quality:n.quality});d.value=i}I(async()=>{let n=await R(_.value);n&&(d.value=await r.hasFav(n.vid),r.addPlayed(_.value))});async function R(n){var m,h,a;(m=globalThis.$loadingBar)==null||m.start();let{data:i}=await _e(n);if((h=globalThis.$loadingBar)==null||h.finish(),!i){(a=globalThis.$message)==null||a.warning("video is no data");return}return Object.assign(e.value,i),o.$route.meta.title=i.title,t.setTitle(i.title),V.value=[i.url],i}return(n,i,m,h)=>{const a=le,f=ne,x=xe,U=ie,S=ee;i(`<div${fe(h)}>`),i(u(a,{class:"player",cols:"20",responsive:"screen","item-responsive":!0,"x-gap":"6 m:6","y-gap":"6 m:12"},{default:s((we,q,E,P)=>{if(q)q(u(f,{span:"20 m:13"},{default:s((D,v,F,w)=>{if(v)v(u(x,{res:e.value},null,F,w)),v(`<div${w}><p class="text-28px" style="${M({display:"inline-block","margin-right":"30px"})}"${w}>${ve(e.value.title)}</p>`),v(u(U,{onClick:B=>c(e.value)},{icon:s((B,$,L,T)=>{if($)$(u(S,{style:{color:d.value?"#ff0000":"#ffffff"}},null,L,T));else return[l(S,{style:{color:d.value?"#ff0000":"#ffffff"}},null,8,["style"])]}),_:1},F,w)),v("</div>");else return[l(x,{res:e.value},null,8,["res"]),l("div",null,[l("p",{class:"text-28px",style:{display:"inline-block","margin-right":"30px"}},O(e.value.title),1),l(U,{onClick:B=>c(e.value)},{icon:s(()=>[l(S,{style:{color:d.value?"#ff0000":"#ffffff"}},null,8,["style"])]),_:1},8,["onClick"])])]}),_:1},E,P)),q(u(f,{span:"20 m:7"},{default:s((D,v,F,w)=>{if(v)v(u(a,{cols:"10",responsive:"screen","item-responsive":!0},{default:s((B,$,L,T)=>{if($)$(u(f,{span:"10"},{default:s((he,z,W,X)=>{if(z)e.value.vid?z(u(g(k),{detail:e.value,top:10},null,W,X)):z("<!---->");else return[e.value.vid?(C(),b(g(k),{key:0,detail:e.value,top:10},null,8,["detail"])):N("",!0)]}),_:1},L,T));else return[l(f,{span:"10"},{default:s(()=>[e.value.vid?(C(),b(g(k),{key:0,detail:e.value,top:10},null,8,["detail"])):N("",!0)]),_:1})]}),_:1},F,w));else return[l(a,{cols:"10",responsive:"screen","item-responsive":!0},{default:s(()=>[l(f,{span:"10"},{default:s(()=>[e.value.vid?(C(),b(g(k),{key:0,detail:e.value,top:10},null,8,["detail"])):N("",!0)]),_:1})]),_:1})]}),_:1},E,P));else return[l(f,{span:"20 m:13"},{default:s(()=>[l(x,{res:e.value},null,8,["res"]),l("div",null,[l("p",{class:"text-28px",style:{display:"inline-block","margin-right":"30px"}},O(e.value.title),1),l(U,{onClick:D=>c(e.value)},{icon:s(()=>[l(S,{style:{color:d.value?"#ff0000":"#ffffff"}},null,8,["style"])]),_:1},8,["onClick"])])]),_:1}),l(f,{span:"20 m:7"},{default:s(()=>[l(a,{cols:"10",responsive:"screen","item-responsive":!0},{default:s(()=>[l(f,{span:"10"},{default:s(()=>[e.value.vid?(C(),b(g(k),{key:0,detail:e.value,top:10},null,8,["detail"])):N("",!0)]),_:1})]),_:1})]),_:1})]}),_:1},m)),i(u(g(Y),{id:e.value.vid},null,m)),i(u(g(Z),null,null,m)),i("</div>")}}}),G=Q.setup;Q.setup=(p,t)=>{const r=J();return(r.modules||(r.modules=new Set)).add("src/views/video/xplay/[id].vue"),G?G(p,t):void 0};export{Q as default};
