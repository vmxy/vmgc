import{g as z,u as E,c as O,z as f,A as j,w as A,G as oe,o as e,h,i as n,l as i,e as c,p as N,f as k,t as C,F as I,P as Z,aR as ae,k as p,J as D,r as se,m as G,n as U,av as le,aS as re,a as ce,aP as ie,j as L,q as x}from"./index-cc9450de.js";import{_ as de}from"./g-image-cd4f0901.js";import"./index.vue_vue_type_style_index_0_scoped_a68c73cf_lang-b5acc043.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";const ue={class:"label"},_e={class:"tag"},De=z({__name:"index",props:{id:{type:String,required:!0}},setup(a){const r=a,{proxy:d}=Z(),u=E(),v=O(()=>{let t=r.id||d.$route.params.id;return t instanceof Array?t[0]:t}),g=f(u.inSSR?d.$root.$attrs.hot:[]);async function s(t){let{data:V}=await ae(t);g.value=V.list.slice(0,24)}return j(async()=>{s(v.value)}),A(v,t=>{s(t)}),(t,V)=>{const H=de,P=oe("router-link"),B=p.NGi,R=p.NGrid,q=p.NCard;return e(),h(q,{title:t.$t("video.top.rec"),class:"shadow-sm mt-16px"},{default:n(()=>[i(R,{cols:"xs:2 s:2 m:5 l:6 xl:7 2xl:12",responsive:"screen","x-gap":"6 m:12","y-gap":"6 m:12"},{default:n(()=>[(e(!0),c(I,null,N(g.value,y=>(e(),h(B,{span:"1",key:y.id,class:"min-h-90px"},{default:n(()=>[i(P,{to:"/video/detail/"+y.id,class:"v-item"},{default:n(()=>[i(H,{src:y.logo,alt:y.title},null,8,["src","alt"]),k("p",ue,C(y.title),1),k("p",_e,C(t.$t("video.updated"))+" "+C(y.quality),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})]),_:1},8,["title"])}}}),he=["href","onClickCapture","referrerpolicy"],pe=z({__name:"g-a",props:{href:{type:String},label:{type:String},button:{type:Boolean,default:!1},rel:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{type:String,default:""}},setup(a){const r=a,d=D();function u(v){if(v.preventDefault(),v.stopPropagation(),r.disabled)return;let g=r.href;d.push(g)}return(v,g)=>(e(),c("a",{class:U(["g-a",a.button?"g-a-button":"",a.disabled?"disabled":"",a.type?"g-a-"+a.type:""]),href:a.href,onClickCapture:le(u,["stop","prevent"]),referrerpolicy:a.rel?"same-origin":"no-referrer"},[se(v.$slots,"default",{},()=>[G(C(a.label),1)],!0)],42,he))}}),ve=F(pe,[["__scopeId","data-v-3aeddaf6"]]),me={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},fe=k("path",{fill:"currentColor",d:"m12 21.35l-1.45-1.32C5.4 15.36 2 12.27 2 8.5C2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35Z"},null,-1),ge=[fe];function ye(a,r){return e(),c("svg",me,ge)}const Ge={name:"mdi-heart",render:ye},be=z({__name:"qrcode",setup(a,{expose:r}){const d=f(),u=f(!1);r({show:async s=>{ssr||(u.value=!0,await wait(100),g({content:s,logo:"/logo.png"}))}});async function g(s){let t=await re(()=>import("./qrcode-with-logos.es5-c1449bd1.js"),[]);t=t.default||t,console.info("====QRCode",t),await new t({canvas:d.value,content:s.content,width:250,download:!1,logo:{src:s.logo||""},nodeQrCodeOptions:{margin:1}}).toCanvas()}return(s,t)=>{const V=p.NModal;return e(),h(V,{show:u.value,"onUpdate:show":t[0]||(t[0]=H=>u.value=H),class:"custom-card",preset:"card",style:{width:"250px"},title:"",size:"huge",closable:!1,bordered:!1,segmented:{content:"soft",footer:"soft"},"content-style":"padding: 0;margin: 0;"},{"header-extra":n(()=>[]),footer:n(()=>[]),default:n(()=>[k("canvas",{ref_key:"canvasRef",ref:d,width:"250px",height:"250px"},null,512)]),_:1},8,["show"])}}}),xe={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},we=k("path",{fill:"currentColor",d:"M4 4h6v6H4V4m16 0v6h-6V4h6m-6 11h2v-2h-2v-2h2v2h2v-2h2v2h-2v2h2v3h-2v2h-2v-2h-3v2h-2v-4h3v-1m2 0v3h2v-3h-2M4 20v-6h6v6H4M6 6v2h2V6H6m10 0v2h2V6h-2M6 16v2h2v-2H6m-2-5h2v2H4v-2m5 0h4v4h-2v-2H9v-2m2-5h2v4h-2V6M2 2v4H0V2a2 2 0 0 1 2-2h4v2H2m20-2a2 2 0 0 1 2 2v4h-2V2h-4V0h4M2 18v4h4v2H2a2 2 0 0 1-2-2v-4h2m20 4v-4h2v4a2 2 0 0 1-2 2h-4v-2h4Z"},null,-1),$e=[we];function Ce(a,r){return e(),c("svg",xe,$e)}const ke={name:"mdi-qrcode-scan",render:Ce},Ve={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},He=k("path",{fill:"currentColor",d:"M19 17h3l-4 4l-4-4h3V3h2v14M9 13H7c-1.1 0-2 .9-2 2v1a2 2 0 0 0 2 2h2v1H5v2h4c1.11 0 2-.89 2-2v-4a2 2 0 0 0-2-2m0 3H7v-1h2v1M9 3H7c-1.1 0-2 .9-2 2v4a2 2 0 0 0 2 2h2c1.11 0 2-.89 2-2V5a2 2 0 0 0-2-2m0 6H7V5h2v4Z"},null,-1),Re=[He];function Se(a,r){return e(),c("svg",Ve,Re)}const Me={name:"mdi-sort-numeric-ascending",render:Se},Ne={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Ie=k("path",{fill:"currentColor",d:"M19 7h3l-4-4l-4 4h3v14h2M9 21H5v-2h4v-1H7a2 2 0 0 1-2-2v-1c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v4c0 1.11-.89 2-2 2m0-6H7v1h2M7 3h2a2 2 0 0 1 2 2v4c0 1.11-.89 2-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2m0 6h2V5H7Z"},null,-1),Be=[Ie];function qe(a,r){return e(),c("svg",Ne,Be)}const Le={name:"mdi-sort-numeric-descending",render:qe},ze={key:0},Pe=["name","tab"],Qe=["href"],Te={key:0,class:"text-24px"},Ee=z({__name:"line",props:{detail:{type:Object,required:!0},top:{type:Number,default:16}},setup(a){const r=a,d=!1;ce();const u=E(),v=ie();D();const{proxy:g}=Z(),s=f(r.detail),t=f(""),V=f(!0),H=f(g.$route.params.id),P=f(),B=f(),R=O(()=>u.screenWidth<1024),q=f({});async function y(){var l,w,S,b;if(!s.value||!((l=s.value)!=null&&l.lines))return"";let o=(S=(w=s.value)==null?void 0:w.lines)==null?void 0:S.find(_=>_.items.find(M=>M.id==H.value));if(o||(o=(b=s.value)==null?void 0:b.lines[0]),o&&!d)for(let _ of o.items){let M=await v.hasPlayed(_.id);q.value[_.id]=M}return(o==null?void 0:o.id)||""}function Q(o){V.value=!1,t.value=o}function T(o=!0){s.value.lines.forEach(l=>{l.items.sort((w,S)=>{let b=parseInt(w.label.replace(/[^\d]+/g,"")),_=parseInt(S.label.replace(/[^\d]+/g,""));return o?b-_:_-b})})}async function J(){var l;let o=((l=globalThis.location)==null?void 0:l.href)||"";B.value.show(o)}return j(async()=>{let o=await y();o&&Q(o)}),A(r.detail,async o=>{Object.assign(s.value,o);let l=await y();l&&Q(l)},{immediate:!0}),(o,l)=>{const w=p.NSpace,S=Le,b=p.NIcon,_=p.NButton,M=Me,W=ke,K=be,X=ve,Y=p.NScrollbar,ee=p.NTabPane,te=p.NTabs,ne=p.NCard;return e(),h(ne,{class:U([`mt-${r.top}px`,"line"]),ref_key:"lineRef",ref:P},{default:n(()=>[L(d)?(e(),c("div",ze,[(e(!0),c(I,null,N(s.value.lines,m=>(e(),c("div",{name:m.id,tab:m.label},[i(w,null,{default:n(()=>[(e(!0),c(I,null,N(m.items,$=>(e(),c("a",{href:`/video/player/${$.id}`},C($.label),9,Qe))),256))]),_:2},1024)],8,Pe))),256))])):x("",!0),L(d)?x("",!0):(e(),h(te,{key:1,value:t.value,type:"line",animated:"",trigger:"click","justify-content":"end",ref:"tabs","onUpdate:value":Q},{prefix:n(()=>[i(w,null,{default:n(()=>[R.value?(e(),c("span",Te,C(o.$t("video.detail.line")),1)):x("",!0),R.value?(e(),h(_,{key:1,type:"error",size:"small",text:"",onClick:l[0]||(l[0]=m=>T(!0))},{icon:n(()=>[i(b,null,{default:n(()=>[i(S)]),_:1})]),_:1})):x("",!0),R.value?(e(),h(_,{key:2,type:"warning",size:"small",text:"",onClick:l[1]||(l[1]=m=>T(!1))},{icon:n(()=>[i(b,null,{default:n(()=>[i(M)]),_:1})]),_:1})):x("",!0),L(u).isMobile?x("",!0):(e(),h(_,{key:3,type:"primary",size:R.value?"small":"large",text:"",onClick:J},{icon:n(()=>[i(b,null,{default:n(()=>[i(W)]),_:1})]),_:1},8,["size"])),L(u).inSSR?x("",!0):(e(),h(K,{key:4,ref_key:"refQRCode",ref:B},null,512))]),_:1})]),default:n(()=>[(e(!0),c(I,null,N(s.value.lines,m=>(e(),h(ee,{name:m.id,tab:m.label},{default:n(()=>[i(Y,{class:"max-h-220px"},{default:n(()=>[m.id==t.value?(e(!0),c(I,{key:0},N(m.items,$=>(e(),h(X,{button:"",disabled:H.value==$.id,href:`/video/xplay/${$.id}`,type:q.value[$.id]?"red":""},{default:n(()=>[G(C($.label),1)]),_:2},1032,["disabled","href","type"]))),256)):x("",!0)]),_:2},1024)]),_:2},1032,["name","tab"]))),256))]),_:1},8,["value"]))]),_:1},8,["class"])}}}),Ue=F(Ee,[["__scopeId","data-v-376cddfe"]]);export{Ue as V,Ge as _,ve as a,De as b};
