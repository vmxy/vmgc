import{g as z,u as E,c as j,z as f,A,w as U,G as se,o as t,h as _,i as o,l as c,e as r,p as N,f as V,t as k,F as I,P as Z,aR as le,k as h,J as D,r as re,m as G,n as F,av as ie,aS as ce,aP as de,j as q,q as $}from"./index-a4a25dc6.js";import{_ as ue}from"./g-image-482b5fdc.js";import"./index.vue_vue_type_style_index_0_scoped_f9e0a513_lang-a39cf2e1.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";const _e={class:"label"},he={class:"tag"},Ze=z({__name:"index",props:{id:{type:String,required:!0}},setup(a){const l=a,{proxy:d}=Z(),p=E(),i=j(()=>{let e=l.id||d.$route.params.id;return e instanceof Array?e[0]:e}),g=f(p.inSSR?d.$root.$attrs.hot:[]);async function v(e){let{data:x}=await le(e);g.value=x.list.slice(0,24)}return A(async()=>{v(i.value)}),U(i,e=>{v(e)}),(e,x)=>{const R=ue,B=se("router-link"),L=h.NGi,T=h.NGrid,H=h.NCard;return t(),_(H,{title:e.$t("video.top.rec"),class:"shadow-sm mt-16px"},{default:o(()=>[c(T,{cols:"xs:2 s:2 m:5 l:6 xl:7 2xl:12",responsive:"screen","x-gap":"6 m:12","y-gap":"6 m:12"},{default:o(()=>[(t(!0),r(I,null,N(g.value,y=>(t(),_(L,{span:"1",key:y.id,class:"min-h-90px"},{default:o(()=>[c(B,{to:"/video/detail/"+y.id,class:"v-item"},{default:o(()=>[c(R,{src:y.logo,alt:y.title},null,8,["src","alt"]),V("p",_e,k(y.title),1),V("p",he,k(e.$t("video.updated"))+" "+k(y.quality),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})]),_:1},8,["title"])}}}),pe=["href","onClickCapture","referrerpolicy"],ve=z({__name:"g-a",props:{href:{type:String},label:{type:String},button:{type:Boolean,default:!1},rel:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},type:{type:String,default:""}},setup(a){const l=a,d=D();function p(i){if(i.preventDefault(),i.stopPropagation(),l.disabled)return;let g=l.href;d.push(g)}return(i,g)=>(t(),r("a",{class:F(["g-a",a.button?"g-a-button":"",a.disabled?"disabled":"",a.type?"g-a-"+a.type:""]),href:a.href,onClickCapture:ie(p,["stop","prevent"]),referrerpolicy:a.rel?"same-origin":"no-referrer"},[re(i.$slots,"default",{},()=>[G(k(a.label),1)],!0)],42,pe))}}),me=J(ve,[["__scopeId","data-v-3aeddaf6"]]),fe={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},ge=V("path",{fill:"currentColor",d:"m12 21.35l-1.45-1.32C5.4 15.36 2 12.27 2 8.5C2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35Z"},null,-1),ye=[ge];function be(a,l){return t(),r("svg",fe,ye)}const De={name:"mdi-heart",render:be},xe=z({__name:"qrcode",setup(a,{expose:l}){const d=f(),p=f(!1);l({show:async v=>{ssr||(p.value=!0,await wait(100),g({content:v,logo:"/logo.png"}))}});async function g(v){let e=await ce(()=>import("./qrcode-with-logos.es5-c1449bd1.js"),[]);e=e.default||e,console.info("====QRCode",e),await new e({canvas:d.value,content:v.content,width:250,download:!1,logo:{src:v.logo||""},nodeQrCodeOptions:{margin:1}}).toCanvas()}return(v,e)=>{const x=h.NModal;return t(),_(x,{show:p.value,"onUpdate:show":e[0]||(e[0]=R=>p.value=R),class:"custom-card",preset:"card",style:{width:"250px"},title:"",size:"huge",closable:!1,bordered:!1,segmented:{content:"soft",footer:"soft"},"content-style":"padding: 0;margin: 0;"},{"header-extra":o(()=>[]),footer:o(()=>[]),default:o(()=>[V("canvas",{ref_key:"canvasRef",ref:d,width:"250px",height:"250px"},null,512)]),_:1},8,["show"])}}}),$e={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},we=V("path",{fill:"currentColor",d:"M4 4h6v6H4V4m16 0v6h-6V4h6m-6 11h2v-2h-2v-2h2v2h2v-2h2v2h-2v2h2v3h-2v2h-2v-2h-3v2h-2v-4h3v-1m2 0v3h2v-3h-2M4 20v-6h6v6H4M6 6v2h2V6H6m10 0v2h2V6h-2M6 16v2h2v-2H6m-2-5h2v2H4v-2m5 0h4v4h-2v-2H9v-2m2-5h2v4h-2V6M2 2v4H0V2a2 2 0 0 1 2-2h4v2H2m20-2a2 2 0 0 1 2 2v4h-2V2h-4V0h4M2 18v4h4v2H2a2 2 0 0 1-2-2v-4h2m20 4v-4h2v4a2 2 0 0 1-2 2h-4v-2h4Z"},null,-1),Ce=[we];function ke(a,l){return t(),r("svg",$e,Ce)}const Ve={name:"mdi-qrcode-scan",render:ke},He={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Se=V("path",{fill:"currentColor",d:"M19 17h3l-4 4l-4-4h3V3h2v14M9 13H7c-1.1 0-2 .9-2 2v1a2 2 0 0 0 2 2h2v1H5v2h4c1.11 0 2-.89 2-2v-4a2 2 0 0 0-2-2m0 3H7v-1h2v1M9 3H7c-1.1 0-2 .9-2 2v4a2 2 0 0 0 2 2h2c1.11 0 2-.89 2-2V5a2 2 0 0 0-2-2m0 6H7V5h2v4Z"},null,-1),Re=[Se];function Me(a,l){return t(),r("svg",He,Re)}const Ne={name:"mdi-sort-numeric-ascending",render:Me},Ie={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"},Be=V("path",{fill:"currentColor",d:"M19 7h3l-4-4l-4 4h3v14h2M9 21H5v-2h4v-1H7a2 2 0 0 1-2-2v-1c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v4c0 1.11-.89 2-2 2m0-6H7v1h2M7 3h2a2 2 0 0 1 2 2v4c0 1.11-.89 2-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2m0 6h2V5H7Z"},null,-1),Te=[Be];function qe(a,l){return t(),r("svg",Ie,Te)}const ze={name:"mdi-sort-numeric-descending",render:qe},Le={key:0},Pe=["name","tab"],Qe=["href"],Oe={key:0,class:"text-24px"},We=z({__name:"line",props:{detail:{type:Object,required:!0},top:{type:Number,default:16}},setup(a){var W;const l=a,d=!1,p=globalThis.WWW_HOST||((W=globalThis.env)==null?void 0:W.innerIP)||"",i=E(),g=de();D();const{proxy:v}=Z(),e=f(l.detail),x=f(""),R=f(!0),B=f(v.$route.params.id),L=f(),T=f(),H=j(()=>i.screenWidth<1024),y=f({});async function Q(){var s,w,S,b;if(!e.value||!((s=e.value)!=null&&s.lines))return"";let n=(S=(w=e.value)==null?void 0:w.lines)==null?void 0:S.find(u=>u.items.find(M=>M.id==B.value));if(n||(n=(b=e.value)==null?void 0:b.lines[0]),n&&!d)for(let u of n.items){let M=await g.hasPlayed(u.id);y.value[u.id]=M}return(n==null?void 0:n.id)||""}function P(n){R.value=!1,x.value=n}function O(n=!0){e.value.lines.forEach(s=>{s.items.sort((w,S)=>{let b=parseInt(w.label.replace(/[^\d]+/g,"")),u=parseInt(S.label.replace(/[^\d]+/g,""));return n?b-u:u-b})})}async function K(){var s;let n=((s=globalThis.location)==null?void 0:s.href)||"";(n.startsWith("http://127.0.0.1")||n.startsWith("http://localhost"))&&p&&(n=n.replace(/^http:\/\/[a-z0-9\.]+:/g,`http://${p}:`)),T.value.show(n)}return A(async()=>{let n=await Q();n&&P(n)}),U(l.detail,async n=>{Object.assign(e.value,n);let s=await Q();s&&P(s)},{immediate:!0}),(n,s)=>{const w=h.NSpace,S=ze,b=h.NIcon,u=h.NButton,M=Ne,X=Ve,Y=xe,ee=me,te=h.NScrollbar,ne=h.NTabPane,oe=h.NTabs,ae=h.NCard;return t(),_(ae,{class:F([`mt-${l.top}px`,"line"]),ref_key:"lineRef",ref:L},{default:o(()=>[q(d)?(t(),r("div",Le,[(t(!0),r(I,null,N(e.value.lines,m=>(t(),r("div",{name:m.id,tab:m.label},[c(w,null,{default:o(()=>[(t(!0),r(I,null,N(m.items,C=>(t(),r("a",{href:`/video/player/${C.id}`},k(C.label),9,Qe))),256))]),_:2},1024)],8,Pe))),256))])):$("",!0),q(d)?$("",!0):(t(),_(oe,{key:1,value:x.value,type:"line",animated:"",trigger:"click","justify-content":"end",ref:"tabs","onUpdate:value":P},{prefix:o(()=>[c(w,null,{default:o(()=>[H.value?(t(),r("span",Oe,k(n.$t("video.detail.line")),1)):$("",!0),H.value?(t(),_(u,{key:1,type:"error",size:"small",text:"",onClick:s[0]||(s[0]=m=>O(!0))},{icon:o(()=>[c(b,null,{default:o(()=>[c(S)]),_:1})]),_:1})):$("",!0),H.value?(t(),_(u,{key:2,type:"warning",size:"small",text:"",onClick:s[1]||(s[1]=m=>O(!1))},{icon:o(()=>[c(b,null,{default:o(()=>[c(M)]),_:1})]),_:1})):$("",!0),q(i).isMobile?$("",!0):(t(),_(u,{key:3,type:"primary",size:H.value?"small":"large",text:"",onClick:K},{icon:o(()=>[c(b,null,{default:o(()=>[c(X)]),_:1})]),_:1},8,["size"])),q(i).inSSR?$("",!0):(t(),_(Y,{key:4,ref_key:"refQRCode",ref:T},null,512))]),_:1})]),default:o(()=>[(t(!0),r(I,null,N(e.value.lines,m=>(t(),_(ne,{name:m.id,tab:m.label},{default:o(()=>[c(te,{class:"max-h-220px"},{default:o(()=>[m.id==x.value?(t(!0),r(I,{key:0},N(m.items,C=>(t(),_(ee,{button:"",disabled:B.value==C.id,href:`/video/xplay/${C.id}`,type:y.value[C.id]?"red":""},{default:o(()=>[G(k(C.label),1)]),_:2},1032,["disabled","href","type"]))),256)):$("",!0)]),_:2},1024)]),_:2},1032,["name","tab"]))),256))]),_:1},8,["value"]))]),_:1},8,["class"])}}}),Ge=J(We,[["__scopeId","data-v-ca0dada4"]]);export{Ge as V,De as _,me as a,Ze as b};
