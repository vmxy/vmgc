import{g as P,K as R,a as M,aP as D,z as C,o,e as _,l as s,i as t,f as $,F as N,p as I,h as b,m as j,t as f,j as h,q as O,k as v,s as E,v as K,P as J,J as W,u as Y,A as H,ay as Q,N as B,G as X,av as Z}from"./index-aab0ccf2.js";import{_ as ee}from"./loading-empty-wrapper.vue_vue_type_script_setup_true_lang-2a4b7118.js";import{_ as ae}from"./g-image-4603d93e.js";/* empty css              */import"./index.vue_vue_type_style_index_0_scoped_f9e0a513_lang-c696dec1.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const le=[{label:"video.all",value:"all"},{label:"video.class.cn",value:"cn"},{label:"video.class.hktw",value:"hktw"},{label:"video.class.ja",value:"ja"},{label:"video.class.ko",value:"ko"},{label:"video.class.euus",value:"euus"},{label:"video.class.other",value:"other"}],te=[{label:"video.all",value:"all"},{label:"video.type.love",value:"love"},{label:"video.type.costume",value:"costume"},{label:"video.type.history",value:"history"},{label:"video.type.scifi",value:"scifi"},{label:"video.type.martial",value:"martial"},{label:"video.type.crime",value:"crime"},{label:"video.type.family",value:"family"},{label:"video.type.war",value:"war"},{label:"video.type.suspense",value:"suspense"},{label:"video.type.horror",value:"horror"},{label:"video.type.action",value:"action"},{label:"video.type.thriller",value:"thriller"},{label:"video.type.fantasy",value:"fantasy"},{label:"video.type.adventure",value:"adventure"},{label:"video.type.comedy",value:"comedy"}],oe=y=>(E("data-v-3dc8b7a8"),y=y(),K(),y),se={class:"v-option"},ne={class:"v-option-line",style:{}},re={class:"v-option-line"},ie={class:"v-option-line"},ue=oe(()=>$("div",{class:"mb-10px"},null,-1)),ce=P({__name:"index",props:{id:{type:String,require:!0}},emits:{search:y=>{}},setup(y){const m=y,c=R(),{proxy:x}=J(),q=M(),n=D(),r=C({class:c.query.class||"all",type:c.query.type||"all",year:c.query.year||"all"});function k(i){r.value.class=i,x.$emit("search",r.value)}function V(i){r.value.type=i,x.$emit("search",r.value)}function u(i){r.value.year=i,x.$emit("search",r.value)}return(i,S)=>{const w=v.NButton,z=v.NScrollbar,e=v.NFormItem,a=v.NDivider,p=v.NForm;return o(),_("div",se,[s(p,{ref:"formRef",model:m,"label-placement":"left","label-align":"right","label-width":"90","require-mark-placement":"right-hanging",size:"medium","show-feedback":!1},{default:t(()=>[s(e,{label:i.$t("video.menu.class"),path:"inputValue"},{default:t(()=>[s(z,{"x-scrollable":"",size:0},{default:t(()=>[$("div",ne,[(o(!0),_(N,null,I(h(le),l=>(o(),b(w,{type:r.value.class==l.value?"primary":"tertiary",secondary:"",tag:"a",class:"mr-10px",inverted:h(q).header.inverted,onClick:g=>k(l.value)},{default:t(()=>[j(f(i.$t(l.label)),1)]),_:2},1032,["type","inverted","onClick"]))),256))])]),_:1})]),_:1},8,["label"]),s(a),/^(tv|movie)$/i.test(y.id)?(o(),_(N,{key:0},[s(e,{label:i.$t("video.menu.type")},{default:t(()=>[s(z,{"x-scrollable":"",size:1},{default:t(()=>[$("div",re,[(o(!0),_(N,null,I(h(te),l=>(o(),b(w,{type:r.value.type==l.value?"primary":"tertiary",secondary:"",tag:"a",class:"mr-10px",inverted:h(q).header.inverted,onClick:g=>V(l.value)},{default:t(()=>[j(f(i.$t(l.label)),1)]),_:2},1032,["type","inverted","onClick"]))),256))])]),_:1})]),_:1},8,["label"]),s(a)],64)):O("",!0),s(e,{label:i.$t("video.menu.year")},{default:t(()=>[s(z,{"x-scrollable":"",size:1},{default:t(()=>[$("div",ie,[(o(!0),_(N,null,I(h(n).years,l=>(o(),b(w,{type:r.value.year==l.value?"primary":"tertiary",secondary:"",tag:"a",class:"mr-10px",inverted:h(q).header.inverted,onClick:g=>u(l.value)},{default:t(()=>[j(f(i.$t(l.label)),1)]),_:2},1032,["type","inverted","onClick"]))),256))])]),_:1})]),_:1},8,["label"]),s(a),ue]),_:1},8,["model"])])}}}),pe=T(ce,[["__scopeId","data-v-3dc8b7a8"]]),de={class:"label"},ve={class:"tag"},ye=["onClick","href"],_e=P({__name:"index",props:{id:{type:String,required:!0},limit:{type:Number,default:24},q:{type:String}},setup(y){const m=y,c=R(),x=W(),q=Y(),n=C({pageNo:parseInt(c.query.pageNo)||1,pageCount:0,total:0,pageSize:24}),r=C([]),k=C(!0),V=C(q.screenWidth<=420?6:10),u=C({class:c.query.class||"all",type:c.query.type||"all",year:c.query.year||"all"});function i(e){let a=Object.assign({},c.query);return a.pageNo=e+"",a.id=m.id,a.class=u.value.class,a.type=u.value.type,a.year=u.value.year,c.path+"?"+Object.keys(a).map(p=>p+"="+encodeURIComponent(a[p])).join("&")}H(()=>{z({...u.value,pageNo:n.value.pageNo})});async function S(e){let a=n.value.pageCount||1;e=e<1?1:e,e=e>a?a:e;let p=c.path,l=Object.assign({},u.value,{pageNo:e});x.push(p+"?"+Object.keys(l).map(g=>g+"="+encodeURIComponent(l[g])).join("&"))}function w(e){u.value.class=e.class||"all",u.value.type=e.type||"all",u.value.year=e.year||"all",S(1)}async function z(e){var p,l;n.value.pageNo=e.pageNo,u.value.class=e.class||"all",u.value.type=e.type||"all",u.value.year=e.year||"all",(p=globalThis.$loadingBar)==null||p.start(),k.value=!0;let{data:a}=await Q({cata:m.id||"tv",class:e.class,type:e.type,year:e.year,pageNo:e.pageNo,q:m.q});(l=globalThis.$loadingBar)==null||l.finish(),k.value=!1,n.value.total=a.page.total,n.value.pageSize=a.page.pageSize,n.value.pageCount=Math.ceil(a.page.total/a.page.pageSize),r.value=(a.list||[]).slice(0,m.limit)}return B("ArrowLeft",()=>{S(n.value.pageNo-1)}),B("ArrowRight",()=>{S(n.value.pageNo+1)}),(e,a)=>{const p=ae,l=X("router-link"),g=v.NGi,U=v.NGrid,A=ee,F=v.NCard,G=v.NSpin,L=v.NPagination;return o(),_("div",null,[s(h(pe),{id:m.id,onSearch:w},null,8,["id"]),s(G,{show:k.value,size:"large"},{default:t(()=>[s(F,{class:"mt-16px module-page"},{header:t(()=>[]),default:t(()=>[r.value.length>0?(o(),b(U,{key:0,cols:"xs:2 s:4 m:5 l:6 xl:7 2xl:12",responsive:"screen","x-gap":"3 x:6 s:9 m:12","y-gap":"3 x:6 s:9 m:12"},{default:t(()=>[(o(!0),_(N,null,I(r.value,d=>(o(),b(g,{key:d.id,span:"1",class:"min-h-90px"},{default:t(()=>[s(l,{to:"/video/detail/"+d.id,class:"v-item"},{default:t(()=>[s(p,{src:d.logo,class:"img"},null,8,["src"]),$("p",de,f(d.title),1),$("p",ve,f(e.$t("video.updated"))+" "+f(d.quality),1)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})):(o(),b(A,{key:1,class:"h-500px",loading:k.value,empty:""},null,8,["loading"]))]),_:1})]),_:1},8,["show"]),r.value.length>0?(o(),b(L,{key:0,page:n.value.pageNo,"onUpdate:page":[a[0]||(a[0]=d=>n.value.pageNo=d),S],"page-slot":V.value,"item-count":n.value.total,"page-size":n.value.pageSize,class:"mt-10px"},{label:t(d=>[d.type=="page"?(o(),_("a",{key:0,onClick:Z(()=>{},["prevent"]),href:`${i(d.node)}`},f(d.node),9,ye)):(o(),_(N,{key:1},[],64))]),_:1},8,["page","page-slot","item-count","page-size"])):O("",!0)])}}}),Ce=T(_e,[["__scopeId","data-v-f9e0a513"]]);export{Ce as V};
