import{g as S,aP as j,z as $,w as C,o as f,e as b,l as e,i as a,f as O,t as o,m as u,x as T,F as k,p as w,h as B,j as h,k as d,u as Y,c as z,A as E,aQ as H,P as M}from"./index-aab0ccf2.js";/* empty css              *//* empty css                                                                */import{d as G}from"./index.vue_vue_type_style_index_0_scoped_f9e0a513_lang-c696dec1.js";import{V as L}from"./index-f2683d37.js";import{_ as P,a as R,V as Q,b as J}from"./line-84991ff4.js";import{_ as K}from"./g-image-4603d93e.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";const W={class:"v-detail-info"},X={class:"text-36px"},Z=S({__name:"info",props:{detail:{type:Object,required:!0}},setup(x){const m=x,v=j(),t=$(m.detail),c=$(!1);async function _(l){let s=await v.toggleFav(l);c.value=s}return C(m.detail,async l=>{c.value=!1,Object.assign(t.value,l),c.value=await v.hasFav(l.id),c.value&&v.saveFav(t.value)}),(l,s)=>{const n=K,i=d.NGi,p=d.NButton,q=P,N=d.NSpace,A=d.NEllipsis,F=R,g=d.NFormItem,D=d.NForm,V=d.NGrid,I=d.NImage;return f(),b("div",W,[e(V,{cols:"10",collapsed:!1,responsive:"screen","item-responsive":!0,"x-gap":"10","y-gap":"20"},{default:a(()=>[e(i,{span:"10 xs:10 s:0",class:"text-align-center"},{default:a(()=>[e(n,{class:"info-logo",src:t.value.logo,alt:t.value.desc},null,8,["src","alt"])]),_:1}),e(i,{span:"10 xs:10 s:8"},{default:a(()=>[e(V,{cols:"10"},{default:a(()=>[e(i,{span:"10"},{default:a(()=>[O("h1",X,o(t.value.title),1)]),_:1}),e(i,{span:"10"},{default:a(()=>[e(N,null,{default:a(()=>[e(p,null,{default:a(()=>[u(o(t.value.year),1)]),_:1}),e(p,null,{default:a(()=>{var r;return[u(o(l.$t(`video.class.${((r=t.value)==null?void 0:r.class)||"other"}`)),1)]}),_:1}),e(p,{onClick:s[0]||(s[0]=r=>_(t.value))},{icon:a(()=>[e(q,{style:T({color:c.value?"#ff0000":"#ffffff"})},null,8,["style"])]),_:1})]),_:1})]),_:1}),e(i,{span:"10",class:"mt-10px"},{default:a(()=>[e(D,{ref:"formRef","label-placement":"left","label-align":"right","label-width":"80","require-mark-placement":"right-hanging",size:"medium","show-feedback":!1},{default:a(()=>[e(A,{"expand-trigger":"click","line-clamp":"2",tooltip:!1},{default:a(()=>[u(o(t.value.desc),1)]),_:1}),e(g,{label:l.$t("video.detail.director")},{default:a(()=>[(f(!0),b(k,null,w(t.value.directors,(r,y)=>(f(),B(F,{href:`/search?q=${r}`},{default:a(()=>[u(o(r||"")+o(y<t.value.directors.length-1?"/":""),1)]),_:2},1032,["href"]))),256))]),_:1},8,["label"]),e(g,{label:l.$t("video.detail.actor")},{default:a(()=>[(f(!0),b(k,null,w(t.value.actors,(r,y)=>(f(),B(F,{href:`/search?q=${r}`},{default:a(()=>[u(o(r||"")+o(y<t.value.actors.length-1?"/":""),1)]),_:2},1032,["href"]))),256))]),_:1},8,["label"]),e(g,{label:l.$t("video.detail.year")},{default:a(()=>[u(o(t.value.year),1)]),_:1},8,["label"]),e(g,{label:l.$t("video.detail.quality")},{default:a(()=>[u(o(t.value.quality),1)]),_:1},8,["label"]),e(g,{label:l.$t("video.detail.updateAt")},{default:a(()=>[u(o(h(G)(t.value.updateAt).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1},8,["label"])]),_:1},512)]),_:1}),e(i,{span:"10",class:"actions mt-10px"},{default:a(()=>[e(N,{align:"center"})]),_:1})]),_:1})]),_:1}),e(i,{span:"xs:0 s:2"},{default:a(()=>[e(I,{src:t.value.logo,style:{"margin-top":"40px"}},null,8,["src"])]),_:1})]),_:1})])}}}),ee=U(Z,[["__scopeId","data-v-24c56c4d"]]),ce=S({__name:"[id]",setup(x){const m=Y(),v=j(),{proxy:t}=M(),c=z(()=>{let s=t.$route.params.id;return s instanceof Array?s[0]:s||""}),_=$(m.inSSR?t.$root.$attrs.detail:Object.assign({id:c.value}));E(()=>{l(c.value)});async function l(s){var i,p;(i=globalThis.$loadingBar)==null||i.start();let{data:n}=await H(s);return console.info("detail===",n),(p=globalThis.$loadingBar)==null||p.finish(),n?(Object.assign(_.value,n),t.$route.meta.title=n.title,m.setTitle(n.title),n):(v.deleteFav(s),n)}return(s,n)=>(f(),b("div",null,[e(h(ee),{detail:_.value},null,8,["detail"]),e(h(Q),{detail:_.value},null,8,["detail"]),e(h(J),{id:_.value.id},null,8,["id"]),e(h(L))]))}});export{ce as default};
